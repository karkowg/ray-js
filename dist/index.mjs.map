{"version":3,"file":"index.mjs","sources":["../src/payloads/ColorPayload.js","../src/payloads/HidePayload.js","../src/payloads/LogPayload.js","../src/payloads/NewScreenPayload.js","../src/payloads/RemovePayload.js","../src/payloads/SizePayload.js","../src/payloads/NotifyPayload.js","../src/payloads/CustomPayload.js","../src/utils/type.js","../src/index.js"],"sourcesContent":["export default color => ({\n    type: 'color',\n    content: { color },\n})\n","export default () => ({\n    type: 'hide',\n    content: [],\n})\n","export default (...values) => {\n    return {\n        type: 'log',\n        content: { values },\n    }\n}\n","export default name => ({\n    type: 'new_screen',\n    content: { name },\n})\n","export default () => ({\n    type: 'remove',\n    content: [],\n})\n","export default size => ({\n    type: 'size',\n    content: { size },\n})\n","export default value => ({\n    type: 'notify',\n    content: { value },\n})\n","export default (content, label) => ({\n    type: 'custom',\n    content: { content, label },\n})\n","/**\n * Check type of operand with more specificity than `typeof`.\n *   Slightly modified version of MDN helper found in `typeof` definition page.\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#real-world_usage\n *\n * @param {*} obj\n * @returns {string}\n */\nexport default function type(obj) {\n  if (obj == null) {\n    return (obj + '').toLowerCase() // implicit toString() conversion\n  }\n\n  const deepType = Object.prototype.toString.call(obj).slice(8, -1).toLowerCase()\n\n  if (deepType === 'generatorfunction') {\n    return 'function'\n  }\n\n  // Prevent over-specificity (for example, [object HTMLDivElement], etc).\n  // Account for functionish Regexp (Android <=2.3), functionish <object> element (Chrome <=57, Firefox <=52), etc.\n  // String.prototype.match is universally supported.\n\n  if (deepType.match(/^(array|bigint|date|error|function|generator|regexp|symbol)$/)) {\n    return deepType\n  }\n\n  return (typeof obj === 'object' || typeof obj === 'function')\n    ? 'object'\n    : typeof obj\n}\n","import axios from 'axios'\nimport * as uuid from 'uuid'\nimport ColorPayload from './payloads/ColorPayload'\nimport HidePayload from './payloads/HidePayload'\nimport LogPayload from './payloads/LogPayload'\nimport NewScreenPayload from './payloads/NewScreenPayload'\nimport RemovePayload from './payloads/RemovePayload'\nimport SizePayload from './payloads/SizePayload'\nimport NotifyPayload from './payloads/NotifyPayload'\nimport CustomPayload from './payloads/CustomPayload'\nimport StackTrace from 'stacktrace-js'\nimport type from './utils/type'\n\nclass Ray {\n    static client\n\n    constructor(host = '127.0.0.1', port = 23517) {\n        this.uuid = uuid.v4()\n        this.client = axios.create({\n            baseURL: `http://${host}:${port}/`,\n        })\n    }\n\n    newScreen(name = '') {\n        this.sendRequest(NewScreenPayload(name))\n\n        return this\n    }\n\n    clearScreen() {\n        return this.newScreen()\n    }\n\n    color(color) {\n        this.sendRequest(ColorPayload(color))\n\n        return this\n    }\n\n    size(size) {\n        this.sendRequest(SizePayload(size))\n\n        return this\n    }\n\n    remove() {\n        this.sendRequest(RemovePayload())\n\n        return this\n    }\n\n    hide() {\n        this.sendRequest(HidePayload())\n\n        return this\n    }\n\n    notify(text) {\n        this.sendRequest(NotifyPayload(text))\n\n        return this\n    }\n\n    die() {\n        process.exit()\n    }\n\n    showWhen(boolOrFunc) {\n        if (typeof boolOrFunc == 'function') boolOrFunc = boolOrFunc()\n\n        if (!boolOrFunc) this.remove()\n\n        return this\n    }\n\n    showIf(boolOrFunc) {\n        return this.showWhen(boolOrFunc)\n    }\n\n    removeWhen(boolOrFunc) {\n        if (typeof boolOrFunc == 'function') boolOrFunc = boolOrFunc()\n\n        if (boolOrFunc) this.remove()\n\n        return this\n    }\n\n    removeIf(boolOrFunc) {\n        return this.removeWhen(boolOrFunc)\n    }\n\n    ban() {\n        return this.send('ðŸ•¶')\n    }\n\n    charles() {\n        return this.send('ðŸŽ¶ ðŸŽ¹ ðŸŽ· ðŸ•º')\n    }\n\n    send(...values) {\n        if (values.length == 0) return this\n\n        this.sendRequest(LogPayload(\n            ...values.map(v => type(v) === 'object' ? JSON.stringify(v) : v)\n        ))\n\n        return this\n    }\n\n    pass(value) {\n        this.send(value)\n\n        return value\n    }\n\n    sendCustom(content, label = '') {\n        this.sendRequest(CustomPayload(content, label))\n\n        return this\n    }\n\n    getOrigin() {\n        const st = StackTrace.getSync()\n        return st.find(({ fileName }) => !fileName.includes('js-ray/dist/index') )\n    }\n\n    sendRequest(...payloads) {\n        const origin = this.getOrigin()\n        const requestPayload = {\n            uuid: this.uuid,\n            payloads: payloads.map(payload => {\n                payload.origin = {\n                    file: origin.fileName || 'unknown.js',\n                    line_number: origin.lineNumber || 1,\n                }\n\n                return payload\n            }),\n            meta: [],\n        }\n\n        this.client.post('/', requestPayload)\n    }\n}\n\nexport const ray = (...args) => new Ray().send(...args)\n"],"names":["color","type","content","values","name","size","value","label","obj","toLowerCase","deepType","Object","prototype","toString","call","slice","match","Ray","constructor","host","port","uuid","client","axios","create","baseURL","newScreen","sendRequest","NewScreenPayload","clearScreen","ColorPayload","SizePayload","remove","RemovePayload","hide","HidePayload","notify","text","NotifyPayload","die","process","exit","showWhen","boolOrFunc","showIf","removeWhen","removeIf","ban","send","charles","length","LogPayload","map","v","JSON","stringify","pass","sendCustom","CustomPayload","getOrigin","st","StackTrace","getSync","find","fileName","includes","payloads","origin","requestPayload","payload","file","line_number","lineNumber","meta","post","ray","args"],"mappings":"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"}